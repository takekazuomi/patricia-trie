# よくある質問（FAQ）

このプロジェクトに関するよくある質問とその回答。

## Q: トランクベース開発を選択する理由は何ですか？

### A: 高速な開発サイクルとシンプルな管理が主な理由

このプロジェクトでトランクベース開発を採用する理由は以下のとおり：

#### 1. 高速なフィードバックサイクル

- **頻繁な統合**: 1日に複数回のマージが発生
- **早期問題発見**: 小さな変更により問題を素早く特定
- **迅速な修正**: 差分が小さいため修正が容易

#### 2. シンプルなブランチ管理

- **管理コスト削減**: 長期間のブランチ管理が不要
- **コンフリクト最小化**: 頻繁な統合により大きなコンフリクトを回避
- **認知負荷軽減**: 複雑なブランチ戦略を覚える必要がない

#### 3. 継続的デリバリーとの相性

- **常時リリース可能**: mainブランチが常にデプロイ可能な状態
- **CI/CDパイプライン**: 自動テストとデプロイの効率化
- **品質保証**: 小さな変更により品質リスクを最小化

### よくある批判とその回答

#### Q: 機能フラグが複雑になりませんか？

**A**: 適切な管理で複雑さを制御可能

- **短期利用**: 機能フラグは短期間のみ使用
- **定期的な削除**: 不要になった機能フラグは即座に削除
- **このプロジェクトでは**: 小規模なライブラリプロジェクトのため、機能フラグの使用は限定的

#### Q: 直接mainにプッシュするのは危険では？

**A**: 誤解に基づく批判

- **必須ではない**: 直接プッシュは必須要件ではない
- **短命ブランチ**: 数時間〜数日の短命ブランチを使用
- **PR必須**: 全ての変更はプルリクエストを経由

#### Q: チームの成熟度が必要では？

**A**: 段階的な導入で解決

- **小さなチーム**: 現在は少数での開発
- **学習機会**: トランクベース開発の実践的な学習
- **文書化**: 明確なガイドラインとプロセス

### 他の手法との比較

#### Git Flow vs トランクベース開発

| 項目 | Git Flow | トランクベース開発 |
|------|----------|------------------|
| ブランチ寿命 | 数週間〜数ヶ月 | 数時間〜数日 |
| 統合頻度 | 週1回程度 | 1日数回 |
| リリース準備 | 専用ブランチで調整 | 常時リリース可能 |
| 学習コスト | 高（複雑なルール） | 低（シンプルなルール） |
| 小規模プロジェクト | 過剰 | 適切 |

#### このプロジェクトに適している理由

- **ライブラリプロジェクト**: 機能が明確で分離しやすい
- **継続的改善**: 小さな改善を積み重ねる開発スタイル
- **実験的要素**: 新しい開発手法の学習と実践

### 実装上の工夫

#### 1. 品質保証の仕組み

```bash
# 必須チェック
make test      # テスト実行
make lint      # 静的解析
make benchmark # パフォーマンス検証
```

#### 2. 小さな変更の徹底

- **1PR = 1機能**: 単一の機能に集中
- **数十行程度**: 変更行数を意識的に制限
- **完結性**: 各PRが独立して動作

#### 3. 自動化の活用

- **CI/CDパイプライン**: 自動テストとデプロイ
- **プリコミットフック**: コード品質の事前チェック
- **静的解析**: golangci-lintによる自動チェック

### 失敗時の対策

#### 1. 問題の早期発見

- **頻繁なテスト**: 各変更でテスト実行
- **モニタリング**: 品質指標の継続的な監視
- **迅速な対応**: 問題発見から修正までの時間短縮

#### 2. ロールバック戦略

- **バージョン管理**: 各リリースのタグ付け
- **自動復旧**: 問題検出時の自動ロールバック
- **影響範囲の限定**: 小さな変更による影響の最小化

### 参考文献

- [トランクベース開発におけるメリットとデメリット](https://zenn.dev/sun_asterisk/articles/trunk-based-development-pros-and-cons)
- [1日に15回本番デプロイを実現するトランクベース開発のコツ](https://developers.cyberagent.co.jp/blog/archives/31837/)
- [AWS Prescriptive Guidance - Trunk Strategy](https://docs.aws.amazon.com/prescriptive-guidance/latest/choosing-git-branch-approach/advantages-and-disadvantages-of-the-trunk-strategy.html)
- [Trunk-based Development](https://trunkbaseddevelopment.com/)

---

## Q: その他の技術選択について

### Q: なぜGoを選んだのですか？

**A**: パフォーマンスとシンプルさを重視

- **高速**: コンパイル言語によるパフォーマンス
- **シンプル**: 言語仕様が簡潔で理解しやすい
- **標準ライブラリ**: 豊富な標準ライブラリ
- **並行処理**: goroutineによる効率的な並行処理

### Q: なぜstretchr/testifyを選んだのですか？

**A**: 表現力とGo標準テストとの親和性

- **アサーション**: 豊富で読みやすいアサーション
- **モック**: 効率的なモック機能
- **Go標準**: 標準testingパッケージとの併用可能
- **実績**: Go界隈での広い採用実績

### Q: なぜgolangci-lintを選んだのですか？

**A**: 包括的な静的解析と設定の柔軟性

- **多機能**: 複数のリンターを統合
- **設定可能**: プロジェクトに応じた細かな設定
- **高速**: 並列実行による高速な解析
- **CI/CD統合**: 自動化パイプラインとの親和性
